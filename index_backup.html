<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ë°”ì´íƒˆê·¸ë¼í”¼ ìƒê¸°ì½”ì¹˜</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
    background: #e8e8e8;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
  }

  .phone-frame {
    width: 390px;
    max-width: 100%;
    height: 844px;
    max-height: 95vh;
    background: #ffffff;
    border-radius: 40px;
    overflow: hidden;
    box-shadow: 0 25px 80px rgba(0,0,0,0.18), 0 0 0 1px rgba(0,0,0,0.08);
    display: flex;
    flex-direction: column;
    position: relative;
  }

  /* â”€â”€â”€ Header â”€â”€â”€ */
  .chat-header {
    background: #111111;
    padding: 50px 20px 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    flex-shrink: 0;
    position: relative;
  }
  .chat-header::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 44px;
    background: rgba(0,0,0,0.15);
  }
  .header-back {
    color: #fff;
    font-size: 22px;
    cursor: pointer;
    z-index: 1;
  }
  .header-info { flex: 1; z-index: 1; }
  .header-title {
    color: #ffffff;
    font-size: 17px;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 6px;
    letter-spacing: -0.02em;
  }
  .header-title .leaf { font-size: 18px; }
  .header-subtitle {
    color: rgba(255,255,255,0.5);
    font-size: 12px;
    font-weight: 400;
    margin-top: 2px;
    letter-spacing: -0.01em;
  }
  .header-close {
    color: rgba(255,255,255,0.6);
    font-size: 20px;
    cursor: pointer;
    z-index: 1;
    transition: color 0.2s;
  }
  .header-close:hover { color: #fff; }

  /* â”€â”€â”€ Chat Area â”€â”€â”€ */
  .chat-body {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    background: #f5f5f5;
    display: flex;
    flex-direction: column;
    gap: 6px;
    scroll-behavior: smooth;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .chat-body::-webkit-scrollbar { width: 0; }

  .date-divider {
    text-align: center;
    font-size: 11px;
    color: #aaa;
    padding: 8px 0;
    font-weight: 500;
  }

  /* â”€â”€â”€ Messages â”€â”€â”€ */
  .msg-row {
    display: flex;
    align-items: flex-end;
    gap: 8px;
    max-width: 85%;
    opacity: 0;
    transform: translateY(12px);
    animation: msgIn 0.35s ease forwards;
  }
  .msg-row.bot { align-self: flex-start; }
  .msg-row.user { align-self: flex-end; flex-direction: row-reverse; }

  @keyframes msgIn {
    to { opacity: 1; transform: translateY(0); }
  }

  .avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: #111111;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 15px;
    flex-shrink: 0;
    align-self: flex-start;
    margin-top: 4px;
    color: #fff;
    font-weight: 700;
    letter-spacing: -0.05em;
  }

  .msg-content {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  .msg-name {
    font-size: 11px;
    color: #999;
    font-weight: 600;
    margin-left: 4px;
    letter-spacing: -0.01em;
  }

  .bubble {
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.65;
    word-break: keep-all;
    position: relative;
    letter-spacing: -0.02em;
  }
  .bot .bubble {
    background: #ffffff;
    color: #222;
    border-top-left-radius: 4px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.05);
  }
  .user .bubble {
    background: #111111;
    color: #fff;
    border-top-right-radius: 4px;
  }
  .bubble strong { font-weight: 700; color: #000; }
  .user .bubble strong { color: #fff; }
  .bubble .emoji { font-size: 18px; }
  .bubble .small-text {
    font-size: 11px;
    color: #aaa;
    margin-top: 6px;
    line-height: 1.5;
  }

  .msg-time {
    font-size: 10px;
    color: #ccc;
    margin: 0 4px;
    flex-shrink: 0;
    align-self: flex-end;
  }

  /* â”€â”€â”€ Choices â”€â”€â”€ */
  .choices-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 4px 0 4px 44px;
    max-width: 85%;
    opacity: 0;
    animation: msgIn 0.35s ease forwards;
  }
  .choice-btn {
    background: #fff;
    border: 1.5px solid #222;
    border-radius: 24px;
    padding: 11px 18px;
    font-size: 13.5px;
    font-weight: 600;
    color: #222;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: 'Pretendard', sans-serif;
    letter-spacing: -0.02em;
  }
  .choice-btn:hover, .choice-btn:active {
    background: #111;
    color: #fff;
    transform: scale(1.02);
    border-color: #111;
  }
  .choice-btn .icon { font-size: 17px; }

  /* â”€â”€â”€ Chips (single select) â”€â”€â”€ */
  .chips-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    padding: 4px 0 4px 44px;
    max-width: 90%;
    opacity: 0;
    animation: msgIn 0.35s ease forwards;
  }
  .chip {
    background: #fff;
    border: 1.5px solid #ddd;
    border-radius: 20px;
    padding: 8px 16px;
    font-size: 13px;
    color: #666;
    cursor: pointer;
    transition: all 0.2s;
    font-family: 'Pretendard', sans-serif;
    font-weight: 500;
    letter-spacing: -0.02em;
  }
  .chip:hover { border-color: #999; }
  .chip.active {
    border-color: #111;
    background: #111;
    color: #fff;
    font-weight: 600;
  }

  /* â”€â”€â”€ Chips (multi select) â”€â”€â”€ */
  .chips-container.multi .chip.active {
    border-color: #111;
    background: #111;
    color: #fff;
  }

  /* â”€â”€â”€ Consent Box â”€â”€â”€ */
  .consent-banner {
    background: #fafafa;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    padding: 10px 14px;
    margin: 0 0 4px 44px;
    max-width: 82%;
    font-size: 11.5px;
    color: #888;
    line-height: 1.6;
    opacity: 0;
    animation: msgIn 0.35s ease forwards;
    letter-spacing: -0.01em;
  }
  .consent-banner strong { color: #555; }
  .consent-banner .icon { margin-right: 4px; }

  /* â”€â”€â”€ Consent Form (detailed) â”€â”€â”€ */
  .consent-form {
    background: #fff;
    border: 1.5px solid #e0e0e0;
    border-radius: 16px;
    margin: 4px 0 4px 44px;
    max-width: 88%;
    overflow: hidden;
    opacity: 0;
    animation: msgIn 0.35s ease forwards;
    box-shadow: 0 2px 12px rgba(0,0,0,0.04);
  }
  .consent-form-header {
    background: #fafafa;
    padding: 14px 16px 12px;
    border-bottom: 1px solid #eee;
  }
  .consent-form-header h4 {
    font-size: 13px;
    font-weight: 700;
    color: #222;
    letter-spacing: -0.02em;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .consent-form-body {
    padding: 14px 16px;
  }
  .consent-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 0;
    border-bottom: 1px solid #f5f5f5;
  }
  .consent-item:last-child { border-bottom: none; }

  .consent-checkbox {
    width: 20px;
    height: 20px;
    border: 2px solid #ccc;
    border-radius: 6px;
    flex-shrink: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    margin-top: 1px;
    background: #fff;
  }
  .consent-checkbox.checked {
    background: #111;
    border-color: #111;
  }
  .consent-checkbox.checked::after {
    content: 'âœ“';
    color: #fff;
    font-size: 12px;
    font-weight: 700;
  }
  .consent-checkbox.required {
    border-color: #111;
  }

  .consent-text {
    flex: 1;
  }
  .consent-text .label {
    font-size: 13px;
    font-weight: 600;
    color: #222;
    letter-spacing: -0.02em;
  }
  .consent-text .badge-required {
    font-size: 10px;
    font-weight: 700;
    color: #111;
    background: #f0f0f0;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 6px;
  }
  .consent-text .badge-optional {
    font-size: 10px;
    font-weight: 600;
    color: #999;
    background: #f5f5f5;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 6px;
  }
  .consent-text .desc {
    font-size: 11px;
    color: #999;
    margin-top: 4px;
    line-height: 1.5;
    letter-spacing: -0.01em;
  }
  .consent-text .link {
    font-size: 11px;
    color: #666;
    text-decoration: underline;
    cursor: pointer;
    margin-top: 3px;
    display: inline-block;
  }
  .consent-text .link:hover { color: #111; }

  .consent-form-footer {
    padding: 0 16px 14px;
  }
  .consent-submit-btn {
    width: 100%;
    padding: 12px;
    border-radius: 12px;
    border: none;
    font-size: 14px;
    font-weight: 700;
    font-family: 'Pretendard', sans-serif;
    letter-spacing: -0.02em;
    cursor: pointer;
    transition: all 0.2s;
    background: #ddd;
    color: #999;
    pointer-events: none;
  }
  .consent-submit-btn.enabled {
    background: #111;
    color: #fff;
    pointer-events: auto;
    box-shadow: 0 2px 10px rgba(0,0,0,0.15);
  }
  .consent-submit-btn.enabled:hover {
    transform: scale(1.01);
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  }

  /* â”€â”€â”€ Routine Card â”€â”€â”€ */
  .routine-card {
    background: #fff;
    border-radius: 20px;
    margin: 4px 0 4px 44px;
    max-width: 88%;
    overflow: hidden;
    box-shadow: 0 4px 24px rgba(0,0,0,0.08);
    opacity: 0;
    animation: msgIn 0.4s ease forwards;
    border: 1px solid rgba(0,0,0,0.06);
  }
  .routine-card-header {
    background: #111111;
    padding: 18px 20px;
    color: #fff;
  }
  .routine-card-header h3 {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 3px;
    letter-spacing: -0.02em;
  }
  .routine-card-header p {
    font-size: 11px;
    opacity: 0.6;
    font-weight: 400;
  }

  /* â”€â”€â”€ Routine Reason (explainability) â”€â”€â”€ */
  .routine-reason {
    background: #f9f9f9;
    padding: 12px 20px;
    border-bottom: 1px solid #f0f0f0;
  }
  .routine-reason p {
    font-size: 12px;
    color: #666;
    line-height: 1.6;
    letter-spacing: -0.01em;
  }
  .routine-reason p strong { color: #333; }
  .routine-reason .reason-icon {
    font-size: 14px;
    margin-right: 4px;
  }

  .routine-card-body { padding: 16px 20px; }
  .routine-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 0;
    border-bottom: 1px solid #f0f0f0;
  }
  .routine-item:last-child { border-bottom: none; }
  .routine-time {
    background: #f5f5f5;
    color: #333;
    font-size: 11px;
    font-weight: 600;
    padding: 5px 10px;
    border-radius: 12px;
    white-space: nowrap;
    letter-spacing: -0.01em;
  }
  .routine-detail { flex: 1; }
  .routine-detail .product-name {
    font-size: 13.5px;
    font-weight: 700;
    color: #111;
    letter-spacing: -0.02em;
  }
  .routine-detail .product-desc {
    font-size: 11.5px;
    color: #999;
    margin-top: 3px;
    letter-spacing: -0.01em;
  }

  /* â”€â”€â”€ Refill Period Badge â”€â”€â”€ */
  .routine-card-footer {
    background: #fafafa;
    padding: 12px 20px;
    border-top: 1px solid #f0f0f0;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .refill-badge {
    font-size: 11px;
    font-weight: 600;
    color: #555;
    background: #eee;
    padding: 4px 10px;
    border-radius: 8px;
    letter-spacing: -0.01em;
  }
  .refill-text {
    font-size: 11.5px;
    color: #888;
    letter-spacing: -0.01em;
  }

  /* â”€â”€â”€ CTA Buttons â”€â”€â”€ */
  .cta-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 4px 0 4px 44px;
    max-width: 85%;
    opacity: 0;
    animation: msgIn 0.35s ease forwards;
  }
  .cta-btn {
    border-radius: 24px;
    padding: 13px 20px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-family: 'Pretendard', sans-serif;
    letter-spacing: -0.02em;
  }
  .cta-primary {
    background: #111111;
    color: #fff;
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  }
  .cta-primary:hover { transform: scale(1.02); box-shadow: 0 6px 24px rgba(0,0,0,0.28); }
  .cta-secondary {
    background: #fff;
    color: #111;
    border: 1.5px solid #111;
  }
  .cta-secondary:hover { background: #f5f5f5; }
  .cta-tertiary {
    background: #f5f5f5;
    color: #777;
    border: 1.5px solid #e0e0e0;
  }
  .cta-tertiary:hover { background: #eee; }

  /* â”€â”€â”€ Progress Bar â”€â”€â”€ */
  .progress-wrapper {
    padding: 0 20px;
    background: #f5f5f5;
  }
  .progress-bar-track {
    height: 3px;
    background: #e0e0e0;
    border-radius: 2px;
    overflow: hidden;
  }
  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #333, #111);
    border-radius: 2px;
    transition: width 0.6s ease;
  }

  /* â”€â”€â”€ Channel selector â”€â”€â”€ */
  .channel-selector {
    display: flex;
    gap: 8px;
    margin-top: 8px;
  }
  .channel-option {
    flex: 1;
    padding: 8px 4px;
    border: 1.5px solid #ddd;
    border-radius: 10px;
    text-align: center;
    font-size: 11px;
    font-weight: 500;
    color: #888;
    cursor: pointer;
    transition: all 0.2s;
    font-family: 'Pretendard', sans-serif;
    background: #fff;
  }
  .channel-option .ch-icon { font-size: 16px; display: block; margin-bottom: 2px; }
  .channel-option.active {
    border-color: #111;
    color: #111;
    font-weight: 700;
    background: #f5f5f5;
  }

  /* â”€â”€â”€ Modal Overlay â”€â”€â”€ */
  .modal-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    align-items: flex-end;
    justify-content: center;
    z-index: 100;
    border-radius: 40px;
    overflow: hidden;
  }
  .modal-overlay.show { display: flex; }

  .modal-sheet {
    background: #fff;
    width: 100%;
    border-radius: 20px 20px 0 0;
    padding: 24px 20px 36px;
    max-height: 75%;
    overflow-y: auto;
    animation: slideUp 0.3s ease;
  }
  @keyframes slideUp {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
  }
  .modal-handle {
    width: 36px;
    height: 4px;
    background: #ddd;
    border-radius: 2px;
    margin: 0 auto 16px;
  }
  .modal-title {
    font-size: 16px;
    font-weight: 700;
    color: #111;
    letter-spacing: -0.02em;
    margin-bottom: 4px;
  }
  .modal-subtitle {
    font-size: 12px;
    color: #999;
    margin-bottom: 16px;
  }

  .modal-consent-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 14px 0;
    border-bottom: 1px solid #f0f0f0;
  }
  .modal-consent-item:last-child { border-bottom: none; }

  .modal-btn-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 16px;
  }
  .modal-btn {
    width: 100%;
    padding: 14px;
    border-radius: 14px;
    font-size: 14px;
    font-weight: 700;
    font-family: 'Pretendard', sans-serif;
    letter-spacing: -0.02em;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
    text-align: center;
  }
  .modal-btn.primary {
    background: #111;
    color: #fff;
  }
  .modal-btn.ghost {
    background: transparent;
    color: #999;
    font-weight: 500;
  }

  /* â”€â”€â”€ Refill modal channel â”€â”€â”€ */
  .refill-consent-section {
    background: #f9f9f9;
    border-radius: 12px;
    padding: 14px;
    margin-top: 12px;
  }
  .refill-consent-section .section-label {
    font-size: 12px;
    font-weight: 600;
    color: #555;
    margin-bottom: 8px;
  }

  /* â”€â”€â”€ Animation delays â”€â”€â”€ */
  .delay-1 { animation-delay: 0.3s; }
  .delay-2 { animation-delay: 0.6s; }
  .delay-3 { animation-delay: 0.9s; }
  .delay-4 { animation-delay: 1.2s; }
  .delay-5 { animation-delay: 1.5s; }
  .delay-6 { animation-delay: 1.8s; }
  .delay-7 { animation-delay: 2.1s; }
  .delay-8 { animation-delay: 2.4s; }
  .delay-9 { animation-delay: 2.7s; }
  .delay-10 { animation-delay: 3.0s; }
  .delay-11 { animation-delay: 3.3s; }
  .delay-12 { animation-delay: 3.6s; }
  .delay-13 { animation-delay: 3.9s; }
  .delay-14 { animation-delay: 4.2s; }

  /* â”€â”€â”€ Screens â”€â”€â”€ */
  .screen { display: none; flex-direction: column; height: 100%; position: relative; }
  .screen.active { display: flex; }

  /* â”€â”€â”€ Input Bar â”€â”€â”€ */
  .chat-input-bar {
    background: #fff;
    padding: 12px 16px 30px;
    border-top: 1px solid #eee;
    display: flex;
    align-items: center;
    gap: 10px;
    flex-shrink: 0;
  }
  .chat-input {
    flex: 1;
    border: 1.5px solid #e0e0e0;
    border-radius: 24px;
    padding: 10px 18px;
    font-size: 14px;
    font-family: 'Pretendard', sans-serif;
    outline: none;
    transition: border-color 0.2s;
    background: #f9f9f9;
    letter-spacing: -0.02em;
    color: #222;
  }
  .chat-input:focus { border-color: #111; background: #fff; }
  .chat-input::placeholder { color: #bbb; }
  .send-btn {
    width: 40px; height: 40px;
    border-radius: 50%;
    background: #111111;
    border: none;
    color: #fff;
    font-size: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
  }
  .send-btn:hover { transform: scale(1.08); background: #333; }
</style>
</head>
<body>

<div class="phone-frame">

  <!-- ===== SCREEN 1: Welcome + ë™ì˜ ===== -->
  <div class="screen active" id="screen1">
    <div class="chat-header">
      <span class="header-back">â€¹</span>
      <div class="header-info">
        <div class="header-title">ë°”ì´íƒˆê·¸ë¼í”¼ ìƒê¸°ì½”ì¹˜ <span class="leaf">ğŸŒ¿</span></div>
        <div class="header-subtitle">ë³´í†µ 1ë¶„ ë‚´ ì‘ë‹µ</div>
      </div>
      <span class="header-close">âœ•</span>
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-track"><div class="progress-bar-fill" style="width: 10%"></div></div>
    </div>
    <div class="chat-body">
      <div class="date-divider">ì˜¤ëŠ˜</div>

      <!-- Bot: ì¸ì‚¬ -->
      <div class="msg-row bot delay-1">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble">
            ë‹µë‹µí•œ ê¸°ë¶„ì„ <strong>ìƒì¾Œí•˜ê²Œ</strong> ë§Œë“¤ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?<br><br>
            ì˜ ì°¾ì•„ì˜¤ì…¨ì–´ìš”! <span class="emoji">ğŸ˜Š</span><br><br>
            <strong>ë°”ì´íƒˆê·¸ë¼í”¼ ìƒê¸°ì½”ì¹˜</strong>ê°€<br>
            <strong>1ë¶„ ë¬¸ì§„</strong>ìœ¼ë¡œ ì§€ê¸ˆ ë‚˜ì—ê²Œ ë”± ë§ëŠ”<br>
            <strong>ì›°ë‹ˆìŠ¤ ë£¨í‹´</strong>ì„ ì œì•ˆë“œë¦´ê²Œìš”!
          </div>
        </div>
      </div>

      <!-- Consent Form (A) -->
      <div class="consent-form delay-2" id="consentFormA">
        <div class="consent-form-header">
          <h4>ğŸ”’ ì‹œì‘ ì „ ë™ì˜ê°€ í•„ìš”í•´ìš”</h4>
        </div>
        <div class="consent-form-body">
          <div class="consent-item">
            <div class="consent-checkbox required checked" id="chk1" onclick="toggleConsent('chk1', true)"></div>
            <div class="consent-text">
              <div class="label">ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë™ì˜ <span class="badge-required">í•„ìˆ˜</span></div>
              <div class="desc">
                ìˆ˜ì§‘í•­ëª©: ì›°ë‹ˆìŠ¤ ëª©ì , ìƒí™œíŒ¨í„´, ì„­ì·¨ ì„ í˜¸<br>
                ì´ìš©ëª©ì : ë§ì¶¤ ë£¨í‹´ ì¶”ì²œ ë° ì œê³µ<br>
                ë³´ê´€ê¸°ê°„: ë™ì˜ ì² íšŒ ì‹œ ë˜ëŠ” 1ë…„ í›„ íŒŒê¸°<br>
                ì œ3ì ì œê³µ: ì—†ìŒ
              </div>
              <span class="link">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ ì „ë¬¸ ë³´ê¸° â€º</span>
            </div>
          </div>
          <div class="consent-item">
            <div class="consent-checkbox" id="chk2" onclick="toggleConsent('chk2', false)"></div>
            <div class="consent-text">
              <div class="label">ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜ <span class="badge-optional">ì„ íƒ</span></div>
              <div class="desc">
                ë¦¬í•„ ì•Œë¦¼, ë£¨í‹´ íŒ, ë§ì¶¤ í˜œíƒ ì•ˆë‚´<br>
                ì¹´ì¹´ì˜¤/ë¬¸ì/ì´ë©”ì¼ ì¤‘ ì„ íƒ Â· ì–¸ì œë“  ì² íšŒ ê°€ëŠ¥
              </div>
            </div>
          </div>
        </div>
        <div class="consent-form-footer">
          <button class="consent-submit-btn enabled" id="consentBtn" onclick="goScreen(2)">ë™ì˜í•˜ê³  ì‹œì‘í•˜ê¸°</button>
        </div>
      </div>
    </div>
    <div class="chat-input-bar">
      <input class="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." disabled>
      <button class="send-btn">â†‘</button>
    </div>
  </div>

  <!-- ===== SCREEN 2: Q1 â€“ ì›í•˜ëŠ” ë³€í™” ===== -->
  <div class="screen" id="screen2">
    <div class="chat-header">
      <span class="header-back" onclick="goScreen(1)">â€¹</span>
      <div class="header-info">
        <div class="header-title">ë°”ì´íƒˆê·¸ë¼í”¼ ìƒê¸°ì½”ì¹˜ <span class="leaf">ğŸŒ¿</span></div>
        <div class="header-subtitle">STEP 1/4 Â· ì›í•˜ëŠ” ë³€í™”</div>
      </div>
      <span class="header-close">âœ•</span>
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-track"><div class="progress-bar-fill" style="width: 25%"></div></div>
    </div>
    <div class="chat-body">
      <div class="msg-row user delay-1">
        <div class="msg-content">
          <div class="bubble">ğŸŒ¿ ë™ì˜í•˜ê³  ì‹œì‘í•˜ê¸°</div>
        </div>
        <span class="msg-time">2:16</span>
      </div>

      <div class="msg-row bot delay-2">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble">
            ì¢‹ì•„ìš”! ë¨¼ì € í•œ ê°€ì§€ë§Œ ì—¬ì­¤ë³¼ê²Œìš” <span class="emoji">ğŸ˜Š</span><br><br>
            <strong>ì˜¤ëŠ˜ ê°€ì¥ ì›í•˜ëŠ” ë³€í™”</strong>ëŠ”<br>ë¬´ì—‡ì¸ê°€ìš”?
            <div class="small-text">í•˜ë‚˜ë§Œ ì„ íƒí•´ì£¼ì„¸ìš”</div>
          </div>
        </div>
      </div>

      <div class="choices-container delay-3">
        <div class="choice-btn" onclick="goScreen(3)"><span class="icon">ğŸ’¨</span> ìƒì¾Œí•¨ Â· ì»¨ë””ì…˜ UP</div>
        <div class="choice-btn" onclick="goScreen(3)"><span class="icon">ğŸ˜´</span> ìˆ˜ë©´ Â· í”¼ë¡œ ê´€ë¦¬</div>
        <div class="choice-btn" onclick="goScreen(3)"><span class="icon">ğŸ«§</span> ì¥ Â· ì†Œí™” ì¼€ì–´</div>
        <div class="choice-btn" onclick="goScreen(3)"><span class="icon">âœ¨</span> í”¼ë¶€ Â· íƒ„ë ¥ ê´€ë¦¬</div>
        <div class="choice-btn" onclick="goScreen(3)"><span class="icon">ğŸ’ª</span> ìš´ë™ Â· íšŒë³µ ì„œí¬íŠ¸</div>
      </div>
    </div>
    <div class="chat-input-bar">
      <input class="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." disabled>
      <button class="send-btn">â†‘</button>
    </div>
  </div>

  <!-- ===== SCREEN 3: Q2 â€“ ìƒí™œíŒ¨í„´ ===== -->
  <div class="screen" id="screen3">
    <div class="chat-header">
      <span class="header-back" onclick="goScreen(2)">â€¹</span>
      <div class="header-info">
        <div class="header-title">ë°”ì´íƒˆê·¸ë¼í”¼ ìƒê¸°ì½”ì¹˜ <span class="leaf">ğŸŒ¿</span></div>
        <div class="header-subtitle">STEP 2/4 Â· ìƒí™œíŒ¨í„´</div>
      </div>
      <span class="header-close">âœ•</span>
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-track"><div class="progress-bar-fill" style="width: 50%"></div></div>
    </div>
    <div class="chat-body">
      <div class="msg-row user delay-1">
        <div class="msg-content">
          <div class="bubble">ğŸ’¨ ìƒì¾Œí•¨ Â· ì»¨ë””ì…˜ UP</div>
        </div>
        <span class="msg-time">2:16</span>
      </div>

      <div class="msg-row bot delay-2">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble">
            ìƒì¾Œí•¨ì„ ì›í•˜ì‹œëŠ”êµ°ìš”! <span class="emoji">ğŸŒ¬ï¸</span><br><br>
            ë” ì •í™•í•œ ë£¨í‹´ì„ ìœ„í•´<br><strong>í‰ì†Œ ìƒí™œíŒ¨í„´</strong>ì„ ì•Œë ¤ì£¼ì„¸ìš”.
            <div class="small-text">ê° í•­ëª©ì—ì„œ í•˜ë‚˜ë§Œ ì„ íƒí•´ì£¼ì„¸ìš”</div>
          </div>
        </div>
      </div>

      <div class="msg-row bot delay-3">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble"><strong>ìˆ˜ë©´ì‹œê°„</strong>ì€ ë³´í†µ ì–´ëŠ ì •ë„ì¸ê°€ìš”?</div>
        </div>
      </div>
      <div class="chips-container delay-4" data-group="sleep">
        <div class="chip" onclick="toggleSingle(this)">5ì‹œê°„ ì´í•˜</div>
        <div class="chip active" onclick="toggleSingle(this)">6~7ì‹œê°„</div>
        <div class="chip" onclick="toggleSingle(this)">8ì‹œê°„ ì´ìƒ</div>
      </div>

      <div class="msg-row bot delay-5">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble"><strong>ì¹´í˜ì¸</strong>ì€ í•˜ë£¨ì— ì–¼ë§ˆë‚˜ ë“œì‹œë‚˜ìš”? â˜•</div>
        </div>
      </div>
      <div class="chips-container delay-6" data-group="caffeine">
        <div class="chip" onclick="toggleSingle(this)">ì•ˆ ë§ˆì‹¬</div>
        <div class="chip" onclick="toggleSingle(this)">1~2ì”</div>
        <div class="chip active" onclick="toggleSingle(this)">3ì” ì´ìƒ</div>
      </div>

      <div class="msg-row bot delay-7">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble"><strong>ìš´ë™</strong>ì€ ì¼ì£¼ì¼ì— ëª‡ ë²ˆ í•˜ì‹œë‚˜ìš”? ğŸ’ª</div>
        </div>
      </div>
      <div class="chips-container delay-8" data-group="exercise">
        <div class="chip active" onclick="toggleSingle(this)">ê±°ì˜ ì•ˆ í•¨</div>
        <div class="chip" onclick="toggleSingle(this)">1~2íšŒ</div>
        <div class="chip" onclick="toggleSingle(this)">3~4íšŒ</div>
        <div class="chip" onclick="toggleSingle(this)">5íšŒ ì´ìƒ</div>
      </div>

      <div class="choices-container delay-9">
        <div class="choice-btn" onclick="goScreen(4)"><span class="icon">ğŸ‘‰</span> ë‹¤ìŒìœ¼ë¡œ</div>
      </div>
    </div>
    <div class="chat-input-bar">
      <input class="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." disabled>
      <button class="send-btn">â†‘</button>
    </div>
  </div>

  <!-- ===== SCREEN 4: Q3 & Q4 ===== -->
  <div class="screen" id="screen4">
    <div class="chat-header">
      <span class="header-back" onclick="goScreen(3)">â€¹</span>
      <div class="header-info">
        <div class="header-title">ë°”ì´íƒˆê·¸ë¼í”¼ ìƒê¸°ì½”ì¹˜ <span class="leaf">ğŸŒ¿</span></div>
        <div class="header-subtitle">STEP 3/4 Â· ì„­ì·¨ ì„ í˜¸</div>
      </div>
      <span class="header-close">âœ•</span>
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-track"><div class="progress-bar-fill" style="width: 75%"></div></div>
    </div>
    <div class="chat-body">
      <div class="msg-row user delay-1">
        <div class="msg-content">
          <div class="bubble">6~7ì‹œê°„ / ì¹´í˜ì¸ 3ì”+ / ìš´ë™ ê±°ì˜ ì•ˆ í•¨</div>
        </div>
        <span class="msg-time">2:17</span>
      </div>

      <div class="msg-row bot delay-2">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble">
            ì•Œê² ìŠµë‹ˆë‹¤! ê±°ì˜ ë‹¤ ì™”ì–´ìš” <span class="emoji">ğŸ˜„</span><br><br>
            <strong>ì„ í˜¸í•˜ëŠ” ì„­ì·¨ í˜•íƒœ</strong>ê°€ ìˆìœ¼ì‹ ê°€ìš”?
            <div class="small-text">í•˜ë‚˜ë§Œ ì„ íƒí•´ì£¼ì„¸ìš”</div>
          </div>
        </div>
      </div>
      <div class="chips-container delay-3" data-group="form">
        <div class="chip active" onclick="toggleSingle(this)">ğŸ’Š ìº¡ìŠ</div>
        <div class="chip" onclick="toggleSingle(this)">ğŸ“¦ ì •ì œ</div>
        <div class="chip" onclick="toggleSingle(this)">ğŸ¥„ ë¶„ë§</div>
        <div class="chip" onclick="toggleSingle(this)">ğŸ§ƒ ì•¡ìƒ</div>
        <div class="chip" onclick="toggleSingle(this)">ğŸ¤· ìƒê´€ì—†ìŒ</div>
      </div>

      <div class="msg-row bot delay-4">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble">
            ë§ˆì§€ë§‰ì´ì—ìš”!<br><br>
            í˜¹ì‹œ <strong>ë¯¼ê°í•˜ê±°ë‚˜ ì£¼ì˜í•˜ëŠ” ì„±ë¶„</strong>ì´ ìˆìœ¼ì‹ ê°€ìš”?
            <div class="small-text">ì—¬ëŸ¬ ê°œ ì„ íƒí•  ìˆ˜ ìˆì–´ìš”</div>
          </div>
        </div>
      </div>
      <div class="chips-container multi delay-5" data-group="allergy">
        <div class="chip active" onclick="toggleMulti(this)">ì—†ìŒ</div>
        <div class="chip" onclick="toggleMulti(this)">ìœ ë‹¹</div>
        <div class="chip" onclick="toggleMulti(this)">ê¸€ë£¨í…</div>
        <div class="chip" onclick="toggleMulti(this)">ëŒ€ë‘</div>
        <div class="chip" onclick="toggleMulti(this)">ê°‘ê°ë¥˜</div>
        <div class="chip" onclick="toggleMulti(this)">ê¸°íƒ€</div>
      </div>

      <div class="choices-container delay-6">
        <div class="choice-btn" onclick="goScreen(5)" style="background:#111; color:#fff; border-color:#111;">
          <span class="icon">âœ¨</span> ë‚´ ë£¨í‹´ ë°›ì•„ë³´ê¸°
        </div>
      </div>
    </div>
    <div class="chat-input-bar">
      <input class="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." disabled>
      <button class="send-btn">â†‘</button>
    </div>
  </div>

  <!-- ===== SCREEN 5: ì¶”ì²œ ê²°ê³¼ ===== -->
  <div class="screen" id="screen5">
    <div class="chat-header">
      <span class="header-back" onclick="goScreen(4)">â€¹</span>
      <div class="header-info">
        <div class="header-title">ë°”ì´íƒˆê·¸ë¼í”¼ ìƒê¸°ì½”ì¹˜ <span class="leaf">ğŸŒ¿</span></div>
        <div class="header-subtitle">âœ… ë‚˜ë§Œì˜ ë£¨í‹´ ì™„ì„±!</div>
      </div>
      <span class="header-close">âœ•</span>
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-track"><div class="progress-bar-fill" style="width: 100%"></div></div>
    </div>
    <div class="chat-body">
      <div class="msg-row user delay-1">
        <div class="msg-content">
          <div class="bubble">âœ¨ ë‚´ ë£¨í‹´ ë°›ì•„ë³´ê¸°</div>
        </div>
        <span class="msg-time">2:18</span>
      </div>

      <div class="msg-row bot delay-2">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble">
            ì…ë ¥í•´ì£¼ì‹  ì •ë³´ë¥¼ ë¶„ì„í•˜ê³  ìˆì–´ìš”â€¦<br>
            <strong>ë‚˜ë§Œì˜ ìƒê¸° ë£¨í‹´</strong>ì„ ë§Œë“¤ê³  ìˆìŠµë‹ˆë‹¤ <span class="emoji">ğŸ”</span>
          </div>
        </div>
      </div>

      <div class="msg-row bot delay-4">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble">
            ì™„ì„±ëì–´ìš”! <span class="emoji">ğŸ‰</span><br><br>
            ì¹´í˜ì¸ ì„­ì·¨ê°€ ë§ê³  ìš´ë™ì´ ì ì€ íŒ¨í„´ì—ì„œ<br>
            <strong>ìƒì¾Œí•¨Â·ì»¨ë””ì…˜</strong>ì„ ë†’ì´ë ¤ë©´<br>
            ì•„ë˜ ë£¨í‹´ì„ ì¶”ì²œë“œë ¤ìš”!
          </div>
        </div>
      </div>

      <!-- Routine Card with Reason + Refill -->
      <div class="routine-card delay-6">
        <div class="routine-card-header">
          <h3>ğŸŒ¿ ë‚˜ì˜ ìƒê¸° ë£¨í‹´</h3>
          <p>ìƒì¾Œí•¨ Â· ì»¨ë””ì…˜ UP ë§ì¶¤</p>
        </div>

        <!-- ì¶”ì²œ ê·¼ê±° (ì„¤ëª…ê°€ëŠ¥ì„±) -->
        <div class="routine-reason">
          <p>
            <span class="reason-icon">ğŸ’¡</span>
            <strong>ì™œ ì´ ë£¨í‹´ì¸ê°€ìš”?</strong><br>
            ì¹´í˜ì¸ 3ì” ì´ìƒ ì„­ì·¨ ì‹œ ë§ˆê·¸ë„¤ìŠ˜ ì†Œëª¨ê°€ ì¦ê°€í•˜ê³ , ìš´ë™ëŸ‰ì´ ì ìœ¼ë©´ ìˆœí™˜ì´ ëŠë ¤ì§ˆ ìˆ˜ ìˆì–´ìš”. <strong>í€˜ë¥´ì„¸í‹´</strong>ìœ¼ë¡œ ì•„ì¹¨ ì»¨ë””ì…˜ì„, <strong>ë§ˆê·¸ë„¤ìŠ˜</strong>ìœ¼ë¡œ ì €ë… ì´ì™„ì„ ì„œí¬íŠ¸í•˜ëŠ” ë£¨í‹´ì´ì—ìš”.
          </p>
        </div>

        <div class="routine-card-body">
          <div class="routine-item">
            <span class="routine-time">â˜€ï¸ ì•„ì¹¨</span>
            <div class="routine-detail">
              <div class="product-name">í€˜ë¥´ì„¸í‹´ ë¸Œë¡œë©œë¼ì¸ 1ìº¡ìŠ</div>
              <div class="product-desc">ì•„ì¹¨ ì‹í›„ Â· ìƒì¾Œí•œ í•˜ë£¨ì˜ ì‹œì‘</div>
            </div>
          </div>
          <div class="routine-item">
            <span class="routine-time">ğŸŒ™ ì €ë…</span>
            <div class="routine-detail">
              <div class="product-name">ë§ˆê·¸ë„¤ìŠ˜ ë¹„ìŠ¤ê¸€ë¦¬ì‹œë„¤ì´íŠ¸ 1ìº¡ìŠ</div>
              <div class="product-desc">ì €ë… ì‹í›„ Â· ê¸´ì¥ ì™„í™” & ìˆ™ë©´ ì„œí¬íŠ¸</div>
            </div>
          </div>
          <div class="routine-item">
            <span class="routine-time">ğŸ’§ ë§¤ì¼</span>
            <div class="routine-detail">
              <div class="product-name">ë¬¼ ì„­ì·¨ ì²´í¬ (1.5L ì´ìƒ)</div>
              <div class="product-desc">ì¹´í˜ì¸ ëŒ€ì²´ Â· ìˆ˜ë¶„ ë°¸ëŸ°ìŠ¤ ìœ ì§€</div>
            </div>
          </div>
        </div>

        <!-- ë¦¬í•„ ì£¼ê¸° (ê°œì¸í™”) -->
        <div class="routine-card-footer">
          <span class="refill-badge">ğŸ“¦ 30ì¼ë¶„</span>
          <span class="refill-text">í•˜ë£¨ 2ìº¡ìŠ ê¸°ì¤€ Â· ë¦¬í•„ ì•Œë¦¼ì€ ì†Œì§„ 3ì¼ ì „ì— ë°œì†¡</span>
        </div>
      </div>

      <div class="msg-row bot delay-8">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble">
            <strong>ì†Œì§„ ì˜ˆì •ì¼ 3ì¼ ì „</strong>ì— ë¦¬í•„ ì•Œë¦¼ì„<br>ë³´ë‚´ë“œë¦´ ìˆ˜ ìˆì–´ìš”!<br><br>
            ê¹Œë¨¹ì§€ ì•Šê³  ê¾¸ì¤€íˆ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡<br>
            ìƒê¸°ì½”ì¹˜ê°€ ì±™ê²¨ë“œë¦´ê²Œìš” <span class="emoji">ğŸ–¤</span>
            <div class="small-text">ì œí’ˆë³„ ì„­ì·¨ëŸ‰ ê¸°ë°˜ìœ¼ë¡œ ë¦¬í•„ ì£¼ê¸°ë¥¼ ê°œì¸í™”í•©ë‹ˆë‹¤<br>(14 / 21 / 28 / 30ì¼)</div>
          </div>
        </div>
      </div>

      <!-- CTAs -->
      <div class="cta-container delay-10">
        <button class="cta-btn cta-primary" onclick="alert('ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ìŠµë‹ˆë‹¤!')">
          ğŸ›’ ì¥ë°”êµ¬ë‹ˆì— ë£¨í‹´ ë‹´ê¸°
        </button>
        <button class="cta-btn cta-secondary" onclick="showRefillModal()">
          ğŸ”” ë¦¬í•„ ì•Œë¦¼ ë°›ê¸°
        </button>
        <button class="cta-btn cta-tertiary" onclick="showSignupModal()">
          ğŸ’¾ ë‚´ ë£¨í‹´ ì €ì¥í•˜ê¸° (íšŒì›ê°€ì…)
        </button>
      </div>

      <div class="msg-row bot delay-12">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">ìƒê¸°ì½”ì¹˜</span>
          <div class="bubble">
            ì˜¤ëŠ˜ë¶€í„° <strong>"ìƒê¸°ë¥¼ ê¸°ë¡"</strong>í•´ë³´ì„¸ìš”!<br>
            ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ë©´ ì–¸ì œë“  ë¬¼ì–´ë´ ì£¼ì„¸ìš” <span class="emoji">ğŸ˜Š</span>
          </div>
        </div>
      </div>
    </div>

    <!-- â”€â”€â”€ Refill Modal (ë§ˆì¼€íŒ… ìˆ˜ì‹  ë™ì˜ B) â”€â”€â”€ -->
    <div class="modal-overlay" id="refillModal">
      <div class="modal-sheet">
        <div class="modal-handle"></div>
        <div class="modal-title">ğŸ”” ë¦¬í•„ ì•Œë¦¼ ì„¤ì •</div>
        <div class="modal-subtitle">ì†Œì§„ ì˜ˆì •ì¼ 3ì¼ ì „ì— ì•Œë¦¼ì„ ë³´ë‚´ë“œë ¤ìš”</div>

        <div class="modal-consent-item">
          <div class="consent-checkbox checked" id="refillChk" onclick="toggleConsent('refillChk', false)"></div>
          <div class="consent-text">
            <div class="label">ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜ <span class="badge-required">í•„ìˆ˜</span></div>
            <div class="desc">
              ë¦¬í•„ ì•Œë¦¼, ë£¨í‹´ ê´€ë¦¬ íŒ, ë§ì¶¤ í˜œíƒ ì•ˆë‚´<br>
              ì–¸ì œë“  ì„¤ì •ì—ì„œ ì² íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
            </div>
            <span class="link">ë§ˆì¼€íŒ… ìˆ˜ì‹  ë™ì˜ ìƒì„¸ë³´ê¸° â€º</span>
          </div>
        </div>

        <div class="refill-consent-section">
          <div class="section-label">ì•Œë¦¼ ë°›ì„ ì±„ë„ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>
          <div class="channel-selector">
            <div class="channel-option active" onclick="selectChannel(this)">
              <span class="ch-icon">ğŸ’¬</span>
              ì¹´ì¹´ì˜¤í†¡
            </div>
            <div class="channel-option" onclick="selectChannel(this)">
              <span class="ch-icon">ğŸ“±</span>
              ë¬¸ì(SMS)
            </div>
            <div class="channel-option" onclick="selectChannel(this)">
              <span class="ch-icon">ğŸ“§</span>
              ì´ë©”ì¼
            </div>
          </div>
        </div>

        <div class="modal-btn-group">
          <button class="modal-btn primary" onclick="closeRefillModal()">ë™ì˜í•˜ê³  ì•Œë¦¼ ë°›ê¸°</button>
          <button class="modal-btn ghost" onclick="closeRefillModal()">ë‹¤ìŒì— í• ê²Œìš”</button>
        </div>
      </div>
    </div>

    <!-- â”€â”€â”€ Signup Modal (íšŒì›ê°€ì… + ë™ì˜ ì¬í™•ì¸) â”€â”€â”€ -->
    <div class="modal-overlay" id="signupModal">
      <div class="modal-sheet">
        <div class="modal-handle"></div>
        <div class="modal-title">ğŸ’¾ ë£¨í‹´ ì €ì¥ & íšŒì›ê°€ì…</div>
        <div class="modal-subtitle">ê°€ì…í•˜ì‹œë©´ ë£¨í‹´ì„ ì €ì¥í•˜ê³  ë‹¤ìŒ ë°©ë¬¸ ì‹œ ì´ì–´ê°ˆ ìˆ˜ ìˆì–´ìš”</div>

        <div class="modal-consent-item">
          <div class="consent-checkbox required checked" id="signChk1" onclick="toggleConsent('signChk1', true); checkSignup()"></div>
          <div class="consent-text">
            <div class="label">ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë™ì˜ <span class="badge-required">í•„ìˆ˜</span></div>
            <div class="desc">
              ìˆ˜ì§‘í•­ëª©: ì´ë©”ì¼, ì›°ë‹ˆìŠ¤ ë¬¸ì§„ ê²°ê³¼, ë£¨í‹´ ê¸°ë¡<br>
              ì´ìš©ëª©ì : íšŒì› ì„œë¹„ìŠ¤ ì œê³µ ë° ë£¨í‹´ ê´€ë¦¬<br>
              ë³´ê´€ê¸°ê°„: íƒˆí‡´ ì‹œ ë˜ëŠ” 1ë…„ í›„ íŒŒê¸° Â· ì œ3ì ì œê³µ ì—†ìŒ
            </div>
            <span class="link">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ ì „ë¬¸ ë³´ê¸° â€º</span>
          </div>
        </div>

        <div class="modal-consent-item">
          <div class="consent-checkbox" id="signChk2" onclick="toggleConsent('signChk2', false)"></div>
          <div class="consent-text">
            <div class="label">ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜ <span class="badge-optional">ì„ íƒ</span></div>
            <div class="desc">
              ë¦¬í•„ ì•Œë¦¼, ë£¨í‹´ íŒ, ë§ì¶¤ í˜œíƒ ì•ˆë‚´<br>
              ì¹´ì¹´ì˜¤/ë¬¸ì/ì´ë©”ì¼ ì¤‘ ì„ íƒ Â· ì–¸ì œë“  ì² íšŒ ê°€ëŠ¥
            </div>
          </div>
        </div>

        <div class="modal-btn-group">
          <button class="modal-btn primary" id="signupBtn" onclick="closeSignupModal()">ë™ì˜í•˜ê³  ê°€ì…í•˜ê¸°</button>
          <button class="modal-btn ghost" onclick="closeSignupModal()">ë‹¤ìŒì— í• ê²Œìš”</button>
        </div>
      </div>
    </div>

    <div class="chat-input-bar">
      <input class="chat-input" placeholder="ê¶ê¸ˆí•œ ì ì„ ë¬¼ì–´ë´ ì£¼ì„¸ìš”...">
      <button class="send-btn">â†‘</button>
    </div>
  </div>

</div>

<script>
  /* â”€â”€â”€ Screen Navigation â”€â”€â”€ */
  function goScreen(n) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById('screen' + n).classList.add('active');
    const screen = document.getElementById('screen' + n);
    const animated = screen.querySelectorAll('[class*="delay-"]');
    animated.forEach(el => {
      el.style.animation = 'none';
      el.offsetHeight;
      el.style.animation = '';
    });
    const body = screen.querySelector('.chat-body');
    if (body) body.scrollTop = 0;
    setTimeout(() => { if (body) body.scrollTop = body.scrollHeight; }, 4500);
  }

  /* â”€â”€â”€ Single Select (ìˆ˜ë©´/ì¹´í˜ì¸/ìš´ë™/ì„­ì·¨í˜•íƒœ) â”€â”€â”€ */
  function toggleSingle(el) {
    const container = el.parentElement;
    container.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
    el.classList.add('active');
  }

  /* â”€â”€â”€ Multi Select (ë¯¼ê° ì„±ë¶„) â”€â”€â”€ */
  function toggleMulti(el) {
    const container = el.parentElement;
    const isNone = el.textContent.trim() === 'ì—†ìŒ';

    if (isNone) {
      // "ì—†ìŒ" ì„ íƒ ì‹œ ë‹¤ë¥¸ í•­ëª© ëª¨ë‘ í•´ì œ
      container.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
      el.classList.add('active');
    } else {
      // ë‹¤ë¥¸ í•­ëª© ì„ íƒ ì‹œ "ì—†ìŒ" í•´ì œ
      container.querySelectorAll('.chip').forEach(c => {
        if (c.textContent.trim() === 'ì—†ìŒ') c.classList.remove('active');
      });
      el.classList.toggle('active');
      // ì•„ë¬´ê²ƒë„ ì„ íƒ ì•ˆ ë˜ì–´ìˆìœ¼ë©´ "ì—†ìŒ" ë‹¤ì‹œ í™œì„±í™”
      const anyActive = container.querySelectorAll('.chip.active').length > 0;
      if (!anyActive) {
        container.querySelectorAll('.chip').forEach(c => {
          if (c.textContent.trim() === 'ì—†ìŒ') c.classList.add('active');
        });
      }
    }
  }

  /* â”€â”€â”€ Consent Checkbox â”€â”€â”€ */
  function toggleConsent(id, isRequired) {
    const el = document.getElementById(id);
    if (isRequired && el.classList.contains('checked')) return; // í•„ìˆ˜ëŠ” í•´ì œ ë¶ˆê°€
    el.classList.toggle('checked');
    updateConsentBtn();
  }

  function updateConsentBtn() {
    const chk1 = document.getElementById('chk1');
    const btn = document.getElementById('consentBtn');
    if (!chk1 || !btn) return;
    if (chk1.classList.contains('checked')) {
      btn.classList.add('enabled');
    } else {
      btn.classList.remove('enabled');
    }
  }

  /* â”€â”€â”€ Signup Modal Validation â”€â”€â”€ */
  function checkSignup() {
    const chk = document.getElementById('signChk1');
    const btn = document.getElementById('signupBtn');
    if (!chk || !btn) return;
    btn.style.opacity = chk.classList.contains('checked') ? '1' : '0.4';
    btn.style.pointerEvents = chk.classList.contains('checked') ? 'auto' : 'none';
  }

  /* â”€â”€â”€ Channel Selector â”€â”€â”€ */
  function selectChannel(el) {
    el.parentElement.querySelectorAll('.channel-option').forEach(c => c.classList.remove('active'));
    el.classList.add('active');
  }

  /* â”€â”€â”€ Modals â”€â”€â”€ */
  function showRefillModal() {
    document.getElementById('refillModal').classList.add('show');
  }
  function closeRefillModal() {
    document.getElementById('refillModal').classList.remove('show');
  }
  function showSignupModal() {
    document.getElementById('signupModal').classList.add('show');
    checkSignup();
  }
  function closeSignupModal() {
    document.getElementById('signupModal').classList.remove('show');
  }

  // Close modals on overlay click
  document.querySelectorAll('.modal-overlay').forEach(overlay => {
    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) overlay.classList.remove('show');
    });
  });

  /* â”€â”€â”€ Auto scroll â”€â”€â”€ */
  window.addEventListener('load', () => {
    setTimeout(() => {
      const active = document.querySelector('.screen.active .chat-body');
      if (active) active.scrollTop = active.scrollHeight;
    }, 3000);
  });
</script>

</body>
</html>
