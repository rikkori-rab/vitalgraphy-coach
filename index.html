<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="format-detection" content="telephone=no">
<meta name="description" content="1분 문진으로 나에게 딱 맞는 웰니스 루틴을 추천받으세요">
<meta name="keywords" content="바이탈그라피, 생기코치, 건강기능식품, 웰니스, 맞춤 추천">
<meta name="author" content="바이탈그라피">
<meta name="theme-color" content="#111111">

<!-- PWA -->
<link rel="manifest" href="./manifest.json">
<link rel="apple-touch-icon" href="./assets/icons/icon-192x192.svg">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:title" content="바이탈그라피 생기코치">
<meta property="og:description" content="1분 문진으로 나에게 딱 맞는 웰니스 루틴을 추천받으세요">
<meta property="og:image" content="/assets/og-image.png">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="바이탈그라피 생기코치">
<meta name="twitter:description" content="1분 문진으로 나에게 딱 맞는 웰니스 루틴을 추천받으세요">

<title>바이탈그라피 생기코치</title>

<!-- Pretendard Font -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css">

<!-- Styles -->
<link rel="stylesheet" href="./css/styles.css">
</head>
<body>

<div class="phone-frame">

  <!-- ===== SCREEN 1: Welcome + 동의 ===== -->
  <div class="screen active" id="screen1">
    <div class="chat-header">
      <span class="header-back">‹</span>
      <div class="header-info">
        <div class="header-title">바이탈그라피 생기코치 <span class="leaf">🌿</span></div>
        <div class="header-subtitle">보통 1분 내 응답</div>
      </div>
      <span class="header-close">✕</span>
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-track"><div class="progress-bar-fill" style="width: 10%"></div></div>
    </div>
    <div class="chat-body">
      <div class="date-divider">오늘</div>

      <!-- Bot: 인사 -->
      <div class="msg-row bot delay-1">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble">
            답답한 기분을 <strong>상쾌하게</strong> 만들고 싶으신가요?<br><br>
            잘 찾아오셨어요! <span class="emoji">😊</span><br><br>
            <strong>바이탈그라피 생기코치</strong>가<br>
            <strong>1분 문진</strong>으로 지금 나에게 딱 맞는<br>
            <strong>웰니스 루틴</strong>을 제안드릴게요!
          </div>
        </div>
      </div>

      <!-- Consent Form (A) -->
      <div class="consent-form delay-2" id="consentFormA">
        <div class="consent-form-header">
          <h4>🔒 시작 전 동의가 필요해요</h4>
        </div>
        <div class="consent-form-body">
          <div class="consent-item">
            <div class="consent-checkbox required checked" id="chk1" onclick="toggleConsent('chk1', true)"></div>
            <div class="consent-text">
              <div class="label">개인정보 수집·이용 동의 <span class="badge-required">필수</span></div>
              <div class="desc">
                수집항목: 웰니스 목적, 생활패턴, 섭취 선호<br>
                이용목적: 맞춤 루틴 추천 및 제공<br>
                보관기간: 동의 철회 시 또는 1년 후 파기<br>
                제3자 제공: 없음
              </div>
              <span class="link">개인정보처리방침 전문 보기 ›</span>
            </div>
          </div>
          <div class="consent-item">
            <div class="consent-checkbox" id="chk2" onclick="toggleConsent('chk2', false)"></div>
            <div class="consent-text">
              <div class="label">마케팅 정보 수신 동의 <span class="badge-optional">선택</span></div>
              <div class="desc">
                리필 알림, 루틴 팁, 맞춤 혜택 안내<br>
                카카오/문자/이메일 중 선택 · 언제든 철회 가능
              </div>
            </div>
          </div>
        </div>
        <div class="consent-form-footer">
          <button class="consent-submit-btn enabled" id="consentBtn" onclick="goScreen(2)">동의하고 시작하기</button>
        </div>
      </div>
    </div>
    <div class="chat-input-bar">
      <input class="chat-input" placeholder="메시지를 입력하세요..." disabled>
      <button class="send-btn">↑</button>
    </div>
  </div>

  <!-- ===== SCREEN 2: Q1 – 원하는 변화 ===== -->
  <div class="screen" id="screen2">
    <div class="chat-header">
      <span class="header-back" onclick="goScreen(1)">‹</span>
      <div class="header-info">
        <div class="header-title">바이탈그라피 생기코치 <span class="leaf">🌿</span></div>
        <div class="header-subtitle">STEP 1/4 · 원하는 변화</div>
      </div>
      <span class="header-close">✕</span>
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-track"><div class="progress-bar-fill" style="width: 25%"></div></div>
    </div>
    <div class="chat-body">
      <div class="msg-row user delay-1">
        <div class="msg-content">
          <div class="bubble">🌿 동의하고 시작하기</div>
        </div>
        <span class="msg-time">2:16</span>
      </div>

      <div class="msg-row bot delay-2">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble">
            좋아요! 먼저 한 가지만 여쭤볼게요 <span class="emoji">😊</span><br><br>
            <strong>오늘 가장 원하는 변화</strong>는<br>무엇인가요?
            <div class="small-text">하나만 선택해주세요</div>
          </div>
        </div>
      </div>

      <div class="choices-container delay-3">
        <div class="choice-btn" onclick="app.selectGoal('freshness')"><span class="icon">💨</span> 상쾌함 · 컨디션 UP</div>
        <div class="choice-btn" onclick="app.selectGoal('sleep')"><span class="icon">😴</span> 수면 · 피로 관리</div>
        <div class="choice-btn" onclick="app.selectGoal('digestion')"><span class="icon">🫧</span> 장 · 소화 케어</div>
        <div class="choice-btn" onclick="app.selectGoal('skin')"><span class="icon">✨</span> 피부 · 탄력 관리</div>
        <div class="choice-btn" onclick="app.selectGoal('exercise')"><span class="icon">💪</span> 운동 · 회복 서포트</div>
      </div>
    </div>
    <div class="chat-input-bar">
      <input class="chat-input" placeholder="메시지를 입력하세요..." disabled>
      <button class="send-btn">↑</button>
    </div>
  </div>

  <!-- ===== SCREEN 3: Q2 – 생활패턴 ===== -->
  <div class="screen" id="screen3">
    <div class="chat-header">
      <span class="header-back" onclick="goScreen(2)">‹</span>
      <div class="header-info">
        <div class="header-title">바이탈그라피 생기코치 <span class="leaf">🌿</span></div>
        <div class="header-subtitle">STEP 2/4 · 생활패턴</div>
      </div>
      <span class="header-close">✕</span>
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-track"><div class="progress-bar-fill" style="width: 50%"></div></div>
    </div>
    <div class="chat-body">
      <div class="msg-row user delay-1">
        <div class="msg-content">
          <div class="bubble" id="goalResponse">💨 상쾌함 · 컨디션 UP</div>
        </div>
        <span class="msg-time">2:16</span>
      </div>

      <div class="msg-row bot delay-2">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble">
            상쾌함을 원하시는군요! <span class="emoji">🌬️</span><br><br>
            더 정확한 루틴을 위해<br><strong>평소 생활패턴</strong>을 알려주세요.
            <div class="small-text">각 항목에서 하나만 선택해주세요</div>
          </div>
        </div>
      </div>

      <div class="msg-row bot delay-3">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble"><strong>수면시간</strong>은 보통 어느 정도인가요?</div>
        </div>
      </div>
      <div class="chips-container delay-4" data-group="sleep">
        <div class="chip" onclick="toggleSingle(this)">5시간 이하</div>
        <div class="chip active" onclick="toggleSingle(this)">6~7시간</div>
        <div class="chip" onclick="toggleSingle(this)">8시간 이상</div>
      </div>

      <div class="msg-row bot delay-5">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble"><strong>카페인</strong>은 하루에 얼마나 드시나요? ☕</div>
        </div>
      </div>
      <div class="chips-container delay-6" data-group="caffeine">
        <div class="chip" onclick="toggleSingle(this)">안 마심</div>
        <div class="chip" onclick="toggleSingle(this)">1~2잔</div>
        <div class="chip active" onclick="toggleSingle(this)">3잔 이상</div>
      </div>

      <div class="msg-row bot delay-7">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble"><strong>운동</strong>은 일주일에 몇 번 하시나요? 💪</div>
        </div>
      </div>
      <div class="chips-container delay-8" data-group="exercise">
        <div class="chip active" onclick="toggleSingle(this)">거의 안 함</div>
        <div class="chip" onclick="toggleSingle(this)">1~2회</div>
        <div class="chip" onclick="toggleSingle(this)">3~4회</div>
        <div class="chip" onclick="toggleSingle(this)">5회 이상</div>
      </div>

      <div class="choices-container delay-9">
        <div class="choice-btn" onclick="goScreen(4)"><span class="icon">👉</span> 다음으로</div>
      </div>
    </div>
    <div class="chat-input-bar">
      <input class="chat-input" placeholder="메시지를 입력하세요..." disabled>
      <button class="send-btn">↑</button>
    </div>
  </div>

  <!-- ===== SCREEN 4: Q3 & Q4 ===== -->
  <div class="screen" id="screen4">
    <div class="chat-header">
      <span class="header-back" onclick="goScreen(3)">‹</span>
      <div class="header-info">
        <div class="header-title">바이탈그라피 생기코치 <span class="leaf">🌿</span></div>
        <div class="header-subtitle">STEP 3/4 · 섭취 선호</div>
      </div>
      <span class="header-close">✕</span>
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-track"><div class="progress-bar-fill" style="width: 75%"></div></div>
    </div>
    <div class="chat-body">
      <div class="msg-row user delay-1">
        <div class="msg-content">
          <div class="bubble">6~7시간 / 카페인 3잔+ / 운동 거의 안 함</div>
        </div>
        <span class="msg-time">2:17</span>
      </div>

      <div class="msg-row bot delay-2">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble">
            알겠습니다! 거의 다 왔어요 <span class="emoji">😄</span><br><br>
            <strong>선호하는 섭취 형태</strong>가 있으신가요?
            <div class="small-text">하나만 선택해주세요</div>
          </div>
        </div>
      </div>
      <div class="chips-container delay-3" data-group="form">
        <div class="chip active" onclick="toggleSingle(this)">💊 캡슐</div>
        <div class="chip" onclick="toggleSingle(this)">📦 정제</div>
        <div class="chip" onclick="toggleSingle(this)">🥄 분말</div>
        <div class="chip" onclick="toggleSingle(this)">🧃 액상</div>
        <div class="chip" onclick="toggleSingle(this)">🤷 상관없음</div>
      </div>

      <div class="msg-row bot delay-4">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble">
            마지막이에요!<br><br>
            혹시 <strong>민감하거나 주의하는 성분</strong>이 있으신가요?
            <div class="small-text">여러 개 선택할 수 있어요</div>
          </div>
        </div>
      </div>
      <div class="chips-container multi delay-5" data-group="allergies">
        <div class="chip active" onclick="toggleMulti(this)">없음</div>
        <div class="chip" onclick="toggleMulti(this)">유당</div>
        <div class="chip" onclick="toggleMulti(this)">글루텐</div>
        <div class="chip" onclick="toggleMulti(this)">대두</div>
        <div class="chip" onclick="toggleMulti(this)">갑각류</div>
        <div class="chip" onclick="toggleMulti(this)">기타</div>
      </div>

      <div class="choices-container delay-6">
        <div class="choice-btn" onclick="handleGenerateRecommendation()" style="background:#111; color:#fff; border-color:#111;">
          <span class="icon">✨</span> 내 루틴 받아보기
        </div>
      </div>
    </div>
    <div class="chat-input-bar">
      <input class="chat-input" placeholder="메시지를 입력하세요..." disabled>
      <button class="send-btn">↑</button>
    </div>
  </div>

  <!-- ===== SCREEN 5: 추천 결과 ===== -->
  <div class="screen" id="screen5">
    <div class="chat-header">
      <span class="header-back" onclick="goScreen(4)">‹</span>
      <div class="header-info">
        <div class="header-title">바이탈그라피 생기코치 <span class="leaf">🌿</span></div>
        <div class="header-subtitle">✅ 나만의 루틴 완성!</div>
      </div>
      <span class="header-close">✕</span>
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-track"><div class="progress-bar-fill" style="width: 100%"></div></div>
    </div>
    <div class="chat-body">
      <div class="msg-row user delay-1">
        <div class="msg-content">
          <div class="bubble">✨ 내 루틴 받아보기</div>
        </div>
        <span class="msg-time">2:18</span>
      </div>

      <div class="msg-row bot delay-2">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble">
            입력해주신 정보를 분석하고 있어요…<br>
            <strong>나만의 생기 루틴</strong>을 만들고 있습니다 <span class="emoji">🔍</span>
          </div>
        </div>
      </div>

      <div class="msg-row bot delay-4">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble">
            완성됐어요! <span class="emoji">🎉</span><br><br>
            카페인 섭취가 많고 운동이 적은 패턴에서<br>
            <strong>상쾌함·컨디션</strong>을 높이려면<br>
            아래 루틴을 추천드려요!
          </div>
        </div>
      </div>

      <!-- Routine Card with Reason + Refill -->
      <div class="routine-card delay-6">
        <div class="routine-card-header">
          <h3>🌿 나의 생기 루틴</h3>
          <p>상쾌함 · 컨디션 UP 맞춤</p>
        </div>

        <!-- 추천 근거 (설명가능성) -->
        <div class="routine-reason">
          <p>
            <span class="reason-icon">💡</span>
            <strong>왜 이 루틴인가요?</strong><br>
            카페인 3잔 이상 섭취 시 마그네슘 소모가 증가하고, 운동량이 적으면 순환이 느려질 수 있어요. <strong>퀘르세틴</strong>으로 아침 컨디션을, <strong>마그네슘</strong>으로 저녁 이완을 서포트하는 루틴이에요.
          </p>
        </div>

        <div class="routine-card-body">
          <div class="routine-item">
            <span class="routine-time">☀️ 아침</span>
            <div class="routine-detail">
              <div class="product-name">퀘르세틴 브로멜라인 1캡슐</div>
              <div class="product-desc">아침 식후 · 상쾌한 하루의 시작</div>
              <div class="product-price">35,000원</div>
              <div class="product-stock">재고: 충분</div>
            </div>
          </div>
          <div class="routine-item">
            <span class="routine-time">🌙 저녁</span>
            <div class="routine-detail">
              <div class="product-name">마그네슘 비스글리시네이트 1캡슐</div>
              <div class="product-desc">저녁 식후 · 긴장 완화 & 숙면 서포트</div>
              <div class="product-price">28,000원</div>
              <div class="product-stock">재고: 충분</div>
            </div>
          </div>
          <div class="routine-item">
            <span class="routine-time">💧 매일</span>
            <div class="routine-detail">
              <div class="product-name">물 섭취 체크 (1.5L 이상)</div>
              <div class="product-desc">카페인 대체 · 수분 밸런스 유지</div>
            </div>
          </div>
        </div>

        <!-- 리필 주기 (개인화) -->
        <div class="routine-card-footer">
          <span class="refill-badge">📦 30일분</span>
          <span class="refill-text">하루 2캡슐 기준 · 리필 알림은 소진 3일 전에 발송</span>
        </div>
      </div>

      <div class="msg-row bot delay-8">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble">
            <strong>소진 예정일 3일 전</strong>에 리필 알림을<br>보내드릴 수 있어요!<br><br>
            까먹지 않고 꾸준히 관리할 수 있도록<br>
            생기코치가 챙겨드릴게요 <span class="emoji">🖤</span>
            <div class="small-text">제품별 섭취량 기반으로 리필 주기를 개인화합니다<br>(14 / 21 / 28 / 30일)</div>
          </div>
        </div>
      </div>

      <!-- CTAs -->
      <div class="cta-container delay-10">
        <button class="cta-btn cta-primary" onclick="handleAddToCart()">
          🛒 장바구니에 루틴 담기
        </button>
        <button class="cta-btn cta-secondary" onclick="showRefillModal()">
          🔔 리필 알림 받기
        </button>
        <button class="cta-btn cta-tertiary" onclick="showSignupModal()">
          💾 내 루틴 저장하기 (회원가입)
        </button>
      </div>

      <div class="msg-row bot delay-12">
        <div class="avatar">V</div>
        <div class="msg-content">
          <span class="msg-name">생기코치</span>
          <div class="bubble">
            오늘부터 <strong>"생기를 기록"</strong>해보세요!<br>
            궁금한 점이 있으면 언제든 물어봐 주세요 <span class="emoji">😊</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ─── Refill Modal (마케팅 수신 동의 B) ─── -->
    <div class="modal-overlay" id="refillModal">
      <div class="modal-sheet">
        <div class="modal-handle"></div>
        <div class="modal-title">🔔 리필 알림 설정</div>
        <div class="modal-subtitle">소진 예정일 3일 전에 알림을 보내드려요</div>

        <div class="modal-consent-item">
          <div class="consent-checkbox checked" id="refillChk" onclick="toggleConsent('refillChk', false)"></div>
          <div class="consent-text">
            <div class="label">마케팅 정보 수신 동의 <span class="badge-required">필수</span></div>
            <div class="desc">
              리필 알림, 루틴 관리 팁, 맞춤 혜택 안내<br>
              언제든 설정에서 철회할 수 있습니다
            </div>
            <span class="link">마케팅 수신 동의 상세보기 ›</span>
          </div>
        </div>

        <div class="refill-consent-section">
          <div class="section-label">알림 받을 채널을 선택해주세요</div>
          <div class="channel-selector">
            <div class="channel-option active" onclick="selectChannel(this)">
              <span class="ch-icon">💬</span>
              카카오톡
            </div>
            <div class="channel-option" onclick="selectChannel(this)">
              <span class="ch-icon">📱</span>
              문자(SMS)
            </div>
            <div class="channel-option" onclick="selectChannel(this)">
              <span class="ch-icon">📧</span>
              이메일
            </div>
          </div>
        </div>

        <div class="modal-btn-group">
          <button class="modal-btn primary" onclick="closeRefillModal()">동의하고 알림 받기</button>
          <button class="modal-btn ghost" onclick="closeRefillModal()">다음에 할게요</button>
        </div>
      </div>
    </div>

    <!-- ─── Signup Modal (회원가입 + 동의 재확인) ─── -->
    <div class="modal-overlay" id="signupModal">
      <div class="modal-sheet">
        <div class="modal-handle"></div>
        <div class="modal-title">💾 루틴 저장 & 회원가입</div>
        <div class="modal-subtitle">가입하시면 루틴을 저장하고 다음 방문 시 이어갈 수 있어요</div>

        <div class="modal-consent-item">
          <div class="consent-checkbox required checked" id="signChk1" onclick="toggleConsent('signChk1', true); checkSignup()"></div>
          <div class="consent-text">
            <div class="label">개인정보 수집·이용 동의 <span class="badge-required">필수</span></div>
            <div class="desc">
              수집항목: 이메일, 웰니스 문진 결과, 루틴 기록<br>
              이용목적: 회원 서비스 제공 및 루틴 관리<br>
              보관기간: 탈퇴 시 또는 1년 후 파기 · 제3자 제공 없음
            </div>
            <span class="link">개인정보처리방침 전문 보기 ›</span>
          </div>
        </div>

        <div class="modal-consent-item">
          <div class="consent-checkbox" id="signChk2" onclick="toggleConsent('signChk2', false)"></div>
          <div class="consent-text">
            <div class="label">마케팅 정보 수신 동의 <span class="badge-optional">선택</span></div>
            <div class="desc">
              리필 알림, 루틴 팁, 맞춤 혜택 안내<br>
              카카오/문자/이메일 중 선택 · 언제든 철회 가능
            </div>
          </div>
        </div>

        <div class="modal-btn-group">
          <button class="modal-btn primary" id="signupBtn" onclick="closeSignupModal()">동의하고 가입하기</button>
          <button class="modal-btn ghost" onclick="closeSignupModal()">다음에 할게요</button>
        </div>
      </div>
    </div>

    <div class="chat-input-bar">
      <input class="chat-input" placeholder="궁금한 점을 물어봐 주세요...">
      <button class="send-btn">↑</button>
    </div>
  </div>

</div>

<!-- Scripts -->
<script src="./js/config.js"></script>
<script src="./js/utils.js"></script>
<script src="./js/data-manager.js"></script>
<script src="./js/cafe24-api.js"></script>
<script src="./js/recommendation-engine.js"></script>
<script src="./js/app.js"></script>

<!-- Google Analytics (옵션) -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script> -->
<!-- <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
</script> -->

<!-- Kakao Pixel (옵션) -->
<!-- <script type="text/javascript" charset="UTF-8" src="//t1.daumcdn.net/kas/static/kp.js"></script> -->
<!-- <script type="text/javascript">
  kakaoPixel('PIXEL_ID').pageView();
</script> -->

</body>
</html>
